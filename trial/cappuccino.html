<!DOCTYPE html>
<html lang="en">
  <head>
    <!--Main Css File-->
    <link rel="stylesheet" href="cappuccino.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cappuccino</title>
    <!--Font Family-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&family=Inder&display=swap"
      rel="stylesheet"
    />
    <!--Font Awsome library-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Mystery+Quest&family=Oswald:wght@200..700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="nav">
      <a href="#contact">Contact US</a>
      <a href="#about">About</a>
      <a href="shop.html">Shop</a>
      <a class="active" href="#home">Home</a>
      <img src="Icon.png" alt="Logo" />
    </div>

    <div class="item-page">
      <!-- Left part -->
      <div class="left-page">
        <img src="media/cuppchino.png" alt="Cappuccino" />
        <span></span>
      </div>
      <!-- Right part -->
      <div class="right-page">
        <div class="contant">
          <a class="icon-cart" href="cart.html" target="_blank"
            ><i class="fa-solid fa-cart-shopping"></i
          ></a>
          <h1>Cappuccino</h1>
          <span class="span-name"></span>
          <p class="para">
            Cappuccino<br />
            A rich blend of espresso, steamed milk, and smooth foam.<br />
            Classic, creamy, and perfect for any time of day.
          </p>
          <div class="price-count">
            <div class="icon-price">
              <i class="fa-solid fa-money-check-dollar"></i>
            </div>
            <h1 class="price">5$</h1>
            <div class="count-js">
              <button id="decrease">-</button>
              <span id="quantity">1</span>
              <button id="increase">+</button>
            </div>
          </div>
          <span class="span-price"></span>
          <button id="addToCart" class="add-to-cart-button">Add To Cart</button>
        </div>
      </div>
    </div>
    <div class="product-details">
      <p>Product Details</p>
      <span></span>
    </div>
    <div class="table-container">
      <table class="product-details-table">
        <tr>
          <th>Material</th>
          <td><p>Milk , Roasted Coffe , Sugar , Cream</p></td>
        </tr>
        <tr>
          <th>Pieces number</th>
          <td><p>1</p></td>
        </tr>
        <tr>
          <th>Flavor</th>
          <td><p>Ordinary Coffe</p></td>
        </tr>
        <tr>
          <th>Weight</th>
          <td><p>20 grams</p></td>
        </tr>
        <tr>
          <th>Calories</th>
          <td><p>~150-200 per 100ml</p></td>
        </tr>
      </table>
    </div>

    <script>
      // Global variable for quantity (like a static variable in C)
      var quantity = 1;

      // Main function (like main() in C)
      function main() {
        // Get quantity display element (like getting a pointer)
        var quantityDisplay = document.querySelector("#quantity");

        // Set up event listeners (like registering callbacks)
        setupIncreaseButton(quantityDisplay);
        setupDecreaseButton(quantityDisplay);
        setupAddToCartButton();
      }

      // Function to handle increasing quantity
      function setupIncreaseButton(displayElement) {
        var button = document.getElementById("increase");
        button.addEventListener("click", function () {
          quantity = quantity + 1; // Increment like in C
          displayElement.textContent = quantity;
        });
      }

      // Function to handle decreasing quantity
      function setupDecreaseButton(displayElement) {
        var button = document.getElementById("decrease");
        button.addEventListener("click", function () {
          // Only decrease if quantity > 1 (like a simple if condition in C)
          if (quantity > 1) {
            quantity = quantity - 1; // Decrement like in C
            displayElement.textContent = quantity;
          }
        });
      }

      // Function to handle adding to cart
      function setupAddToCartButton() {
        var button = document.getElementById("addToCart");
        button.addEventListener("click", function () {
          // Get cart from storage (like reading a file in C)
          var cartJson = localStorage.getItem("cart");
          var cart = [];
          if (cartJson) {
            cart = JSON.parse(cartJson);
          }

          // Create new item (like creating a struct in C)
          var newItem = {
            id: "cappuccino",
            name: "Cappuccino",
            price: 5,
            quantity: quantity,
            image: "media/cuppchino.png",
          };

          // Check if item exists (like searching an array in C)
          var itemExists = false;
          var existingIndex = -1;

          for (var i = 0; i < cart.length; i++) {
            if (cart[i].id === newItem.id) {
              itemExists = true;
              existingIndex = i;
              break; // Exit loop early when found
            }
          }

          // Update or add item (like modifying an array in C)
          if (itemExists) {
            cart[existingIndex].quantity =
              cart[existingIndex].quantity + quantity;
          } else {
            cart.push(newItem); // Like adding to an array in C
          }

          // Save back to storage (like writing to a file in C)
          localStorage.setItem("cart", JSON.stringify(cart));

          // Show success message (like printf in C)
          Swal.fire({
            position: "center",
            icon: "success",
            title: "Item added to the cart",
            showConfirmButton: false,
            timer: 1500,
            background: "#cfb277",
            color: "black",
            iconColor: "#701e1e",
          });
        });
      }

      // Start the program when page loads (like main() in C)
      document.addEventListener("DOMContentLoaded", main);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
